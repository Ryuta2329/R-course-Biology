<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3.3 Factores | R-Biologos.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="3.3 Factores | R-Biologos.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3.3 Factores | R-Biologos.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="marices-y-arreglos..html"/>
<link rel="next" href="tablas-de-datos-data-frames..html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefacio</a></li>
<li class="chapter" data-level="1" data-path="empezando-comandos-básicos..html"><a href="empezando-comandos-básicos..html"><i class="fa fa-check"></i><b>1</b> Empezando: Comandos Básicos.</a>
<ul>
<li class="chapter" data-level="1.1" data-path="el-entorno-de-trabajo..html"><a href="el-entorno-de-trabajo..html"><i class="fa fa-check"></i><b>1.1</b> El entorno de trabajo.</a></li>
<li class="chapter" data-level="1.2" data-path="usando-la-consola-operaciones-matemáticas-en-r..html"><a href="usando-la-consola-operaciones-matemáticas-en-r..html"><i class="fa fa-check"></i><b>1.2</b> Usando la consola: operaciones matemáticas en R.</a></li>
<li class="chapter" data-level="1.3" data-path="asignación-de-variables..html"><a href="asignación-de-variables..html"><i class="fa fa-check"></i><b>1.3</b> Asignación de variables.</a></li>
<li class="chapter" data-level="1.4" data-path="tipos-de-datos-y-su-manejo..html"><a href="tipos-de-datos-y-su-manejo..html"><i class="fa fa-check"></i><b>1.4</b> Tipos de datos y su manejo.</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="tipos-de-datos-y-su-manejo..html"><a href="tipos-de-datos-y-su-manejo..html#datos-numéricos."><i class="fa fa-check"></i><b>1.4.1</b> Datos numéricos.</a></li>
<li class="chapter" data-level="1.4.2" data-path="tipos-de-datos-y-su-manejo..html"><a href="tipos-de-datos-y-su-manejo..html#caracteres."><i class="fa fa-check"></i><b>1.4.2</b> Caracteres.</a></li>
<li class="chapter" data-level="1.4.3" data-path="tipos-de-datos-y-su-manejo..html"><a href="tipos-de-datos-y-su-manejo..html#valores-lógicos."><i class="fa fa-check"></i><b>1.4.3</b> Valores lógicos.</a></li>
<li class="chapter" data-level="1.4.4" data-path="tipos-de-datos-y-su-manejo..html"><a href="tipos-de-datos-y-su-manejo..html#fechas-y-tiempo."><i class="fa fa-check"></i><b>1.4.4</b> Fechas y tiempo.</a></li>
<li class="chapter" data-level="1.4.5" data-path="tipos-de-datos-y-su-manejo..html"><a href="tipos-de-datos-y-su-manejo..html#otros-valores-especiales."><i class="fa fa-check"></i><b>1.4.5</b> Otros valores especiales.</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="organizandote-scripts..html"><a href="organizandote-scripts..html"><i class="fa fa-check"></i><b>1.5</b> Organizandote: <em>Scripts</em>.</a></li>
<li class="chapter" data-level="1.6" data-path="necesitas-ayuda-r-te-ayuda.html"><a href="necesitas-ayuda-r-te-ayuda.html"><i class="fa fa-check"></i><b>1.6</b> Necesitas ayuda: R te ayuda!</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="comunicando-resultados-y-tomando-notas..html"><a href="comunicando-resultados-y-tomando-notas..html"><i class="fa fa-check"></i><b>2</b> Comunicando Resultados y Tomando notas.</a>
<ul>
<li class="chapter" data-level="2.1" data-path="instalando-paquetes-en-r..html"><a href="instalando-paquetes-en-r..html"><i class="fa fa-check"></i><b>2.1</b> Instalando paquetes en R.</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="instalando-paquetes-en-r..html"><a href="instalando-paquetes-en-r..html#representación-de-objetos-y-el-uso-de-comillas."><i class="fa fa-check"></i><b>2.1.1</b> Representación de objetos y el uso de comillas.</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="investigación-reproducible-r-markdown..html"><a href="investigación-reproducible-r-markdown..html"><i class="fa fa-check"></i><b>2.2</b> Investigación reproducible: R Markdown!.</a></li>
<li class="chapter" data-level="2.3" data-path="r-markdown-estructura-y-ejecución..html"><a href="r-markdown-estructura-y-ejecución..html"><i class="fa fa-check"></i><b>2.3</b> R Markdown: Estructura y Ejecución.</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="r-markdown-estructura-y-ejecución..html"><a href="r-markdown-estructura-y-ejecución..html#instalando-r-markdown."><i class="fa fa-check"></i><b>2.3.1</b> Instalando R Markdown.</a></li>
<li class="chapter" data-level="2.3.2" data-path="r-markdown-estructura-y-ejecución..html"><a href="r-markdown-estructura-y-ejecución..html#anatomía-de-un-documento-r-markdown."><i class="fa fa-check"></i><b>2.3.2</b> Anatomía de un documento <em>R Markdown</em>.</a></li>
<li class="chapter" data-level="2.3.3" data-path="r-markdown-estructura-y-ejecución..html"><a href="r-markdown-estructura-y-ejecución..html#imágenes-y-tablas."><i class="fa fa-check"></i><b>2.3.3</b> Imágenes y tablas.</a></li>
<li class="chapter" data-level="2.3.4" data-path="r-markdown-estructura-y-ejecución..html"><a href="r-markdown-estructura-y-ejecución..html#bibliografía-y-referencias."><i class="fa fa-check"></i><b>2.3.4</b> Bibliografía y referencias.</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="notas-finales-sobre-la-investigacion-reproducible..html"><a href="notas-finales-sobre-la-investigacion-reproducible..html"><i class="fa fa-check"></i><b>2.4</b> Notas finales sobre la investigacion reproducible.</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="estructuras-de-datos..html"><a href="estructuras-de-datos..html"><i class="fa fa-check"></i><b>3</b> Estructuras de Datos.</a>
<ul>
<li class="chapter" data-level="3.1" data-path="vectores.html"><a href="vectores.html"><i class="fa fa-check"></i><b>3.1</b> Vectores</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="vectores.html"><a href="vectores.html#operaciones-sobre-vectores."><i class="fa fa-check"></i><b>3.1.1</b> Operaciones sobre vectores.</a></li>
<li class="chapter" data-level="3.1.2" data-path="vectores.html"><a href="vectores.html#vectorización-y-funciones."><i class="fa fa-check"></i><b>3.1.2</b> Vectorización y funciones.</a></li>
<li class="chapter" data-level="3.1.3" data-path="vectores.html"><a href="vectores.html#indexado-usando-expresiones-lógicas."><i class="fa fa-check"></i><b>3.1.3</b> Indexado usando expresiones lógicas.</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="marices-y-arreglos..html"><a href="marices-y-arreglos..html"><i class="fa fa-check"></i><b>3.2</b> Marices y arreglos.</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="marices-y-arreglos..html"><a href="marices-y-arreglos..html#matrices."><i class="fa fa-check"></i><b>3.2.1</b> Matrices.</a></li>
<li class="chapter" data-level="3.2.2" data-path="marices-y-arreglos..html"><a href="marices-y-arreglos..html#arreglos."><i class="fa fa-check"></i><b>3.2.2</b> Arreglos.</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="factores.html"><a href="factores.html"><i class="fa fa-check"></i><b>3.3</b> Factores</a></li>
<li class="chapter" data-level="3.4" data-path="tablas-de-datos-data-frames..html"><a href="tablas-de-datos-data-frames..html"><i class="fa fa-check"></i><b>3.4</b> Tablas de Datos (<em>data frames</em>).</a></li>
<li class="chapter" data-level="3.5" data-path="listas..html"><a href="listas..html"><i class="fa fa-check"></i><b>3.5</b> Listas.</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="factores" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Factores<a href="factores.html#factores" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Los factores son un tipo de dato especial en R que permite almacenar de forma eficiente datos categoricos: nominales u ordinales.
Estos se construyen, al igual que las matrices, a partir de vectores. Y asi como las matrices, los factores tienen un atributo que los diferencia de vectores ordinarios.
Este atributo se refiere a los niveles (<em>levels</em>) del factor: los valores posibles de un factor.
En el análisis de datos, es de vital importancia ya que el comportameinto de modelos estadisticos depende del tipo de los valores de entrada, además de que muchas funciones estadísticas en R tratan los factores de manera distinta a como se tratan los vectores de carcateres.</p>
<p>Para crear un factor se usa la función <code>factor</code>:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="factores.html#cb85-1" tabindex="-1"></a>rating <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Very Bad&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;Very Bad&quot;</span>, <span class="st">&quot;Good&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;Very Good&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;Good&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;Bad&quot;</span>)</span>
<span id="cb85-2"><a href="factores.html#cb85-2" tabindex="-1"></a>rating_factor <span class="ot">&lt;-</span> <span class="fu">factor</span>(rating)</span>
<span id="cb85-3"><a href="factores.html#cb85-3" tabindex="-1"></a>rating_factor</span></code></pre></div>
<pre><code>##  [1] Very Bad  Medium    Very Bad  Good      Medium    Very Good Medium   
##  [8] Good      Medium    Bad      
## Levels: Bad Good Medium Very Bad Very Good</code></pre>
<p>El resultado muestra los elementos del factor, y debajo, las etiquetas de los niveles del factor.
Podemos ver que este es distinto de un vector de caracteres:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="factores.html#cb87-1" tabindex="-1"></a><span class="fu">typeof</span>(rating_factor)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<p>El tipo de los elementos almacenados en el vector es <code>integer</code>. Esto es asi porque los factores se representan como enteros internamente. Los niveles son etiquetas asociadas a cada uno de esos enteros.
Se puede saber los niveles de un factor usando la función <code>levels</code>:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="factores.html#cb89-1" tabindex="-1"></a><span class="fu">levels</span>(rating_factor)</span></code></pre></div>
<pre><code>## [1] &quot;Bad&quot;       &quot;Good&quot;      &quot;Medium&quot;    &quot;Very Bad&quot;  &quot;Very Good&quot;</code></pre>
<p>la cual devuelve un vector de caracteres con las etiquetas de los niveles, en orden alfabético.
Esto ocurre así por omisión: los niveles de un factor se almacenan en orden alfabético.
Sin embargo, podemos especificar el orden en el que se almacenan las etiquetas al crear el factor:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="factores.html#cb91-1" tabindex="-1"></a>rating_factor <span class="ot">&lt;-</span> <span class="fu">factor</span>(rating, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;Very Bad&quot;</span>, <span class="st">&quot;Bad&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;Good&quot;</span>, <span class="st">&quot;Very Good&quot;</span>))</span>
<span id="cb91-2"><a href="factores.html#cb91-2" tabindex="-1"></a>rating_factor</span></code></pre></div>
<pre><code>##  [1] Very Bad  Medium    Very Bad  Good      Medium    Very Good Medium   
##  [8] Good      Medium    Bad      
## Levels: Very Bad Bad Medium Good Very Good</code></pre>
<p>Esto es importante cuando se quiere especificar un nivel de referencia con el cual comparar los resultados de un modelo estadistico. Por ejemplo, si en un estudio se busca usar como variable independiente el habito de fumar, codificado como <em>Fumador</em> y <em>No Fumador</em>, tiene sentido usar el nivel de <em>No Fumador</em> como referencia, de forma que cualquier analisis que use un modelo estadistico compare el cambio en la respuesta como consecuencia del habito de fuumar.
Sin embargo, al crear un factor, debido a que se almacenan alfabéticamente los niveles, el nivel <em>Fumador</em> quedaría como nivel de referencia:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="factores.html#cb93-1" tabindex="-1"></a>smoker <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>)</span>
<span id="cb93-2"><a href="factores.html#cb93-2" tabindex="-1"></a>smoker_factor <span class="ot">&lt;-</span> <span class="fu">factor</span>(smoker)</span>
<span id="cb93-3"><a href="factores.html#cb93-3" tabindex="-1"></a>smoker_factor</span></code></pre></div>
<pre><code>##  [1] No Fumador Fumador    No Fumador No Fumador Fumador    Fumador   
##  [7] No Fumador Fumador    Fumador    No Fumador
## Levels: Fumador No Fumador</code></pre>
<p>Es por ello, que resulta conveniente el uso del argumento <code>levels</code> en la función <code>factor</code>:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="factores.html#cb95-1" tabindex="-1"></a>smoker <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>)</span>
<span id="cb95-2"><a href="factores.html#cb95-2" tabindex="-1"></a>smoker_factor <span class="ot">&lt;-</span> <span class="fu">factor</span>(smoker, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>))</span>
<span id="cb95-3"><a href="factores.html#cb95-3" tabindex="-1"></a>smoker_factor</span></code></pre></div>
<pre><code>##  [1] No Fumador Fumador    No Fumador No Fumador Fumador    Fumador   
##  [7] No Fumador Fumador    Fumador    No Fumador
## Levels: No Fumador Fumador</code></pre>
<p>Hasta este momento, hemos asumido que los factores que hemos creado corresponden a representaciones de variables catgoricas nominales.
Para crear factores que correspondan a representaciones de variables catgoricas ordinales, se puede hacer especificando el argumento <code>ordered=TRUE</code> en la funcion <code>factor</code>; o se puede hacer directamente usando la función <code>ordered</code>:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="factores.html#cb97-1" tabindex="-1"></a><span class="co"># Este ordenamiento tiene sentido en escalas tipo Likert</span></span>
<span id="cb97-2"><a href="factores.html#cb97-2" tabindex="-1"></a>rating_factor <span class="ot">&lt;-</span> <span class="fu">factor</span>(rating, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;Very Bad&quot;</span>, <span class="st">&quot;Bad&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;Good&quot;</span>, <span class="st">&quot;Very Good&quot;</span>), <span class="at">ordered=</span><span class="cn">TRUE</span>)</span>
<span id="cb97-3"><a href="factores.html#cb97-3" tabindex="-1"></a>rating_factor <span class="ot">&lt;-</span> <span class="fu">ordered</span>(rating, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;Very Bad&quot;</span>, <span class="st">&quot;Bad&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;Good&quot;</span>, <span class="st">&quot;Very Good&quot;</span>))</span></code></pre></div>
<p>El especificar de forma explicita los niveles tiene otra ventaja importante: Permite detectar tempranamente errores de codificación de elementos dentro de una variable.
Por ejemplo, digamos que al definir el vector <code>smoker</code> cometimos un error de tipeo, y uno de los elementos lo escribimos <code>"Funador"</code> (tecleamos N en lugar de M). Al crear el factor con los niveles especificados:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="factores.html#cb98-1" tabindex="-1"></a>smoker <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Funador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>) <span class="co"># El segundo elemento tiene el error de tipeo</span></span>
<span id="cb98-2"><a href="factores.html#cb98-2" tabindex="-1"></a>smoker_factor <span class="ot">&lt;-</span> <span class="fu">factor</span>(smoker, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>))</span>
<span id="cb98-3"><a href="factores.html#cb98-3" tabindex="-1"></a>smoker_factor</span></code></pre></div>
<pre><code>##  [1] No Fumador &lt;NA&gt;       No Fumador No Fumador Fumador    Fumador   
##  [7] No Fumador Fumador    Fumador    No Fumador
## Levels: No Fumador Fumador</code></pre>
<p>vemos como el factor contiene un <code>NA</code> donde ocurrió el error de tipeo.
Esto es un problema, ya que pueden introducirse de forma inesperada datos faltantes donde no los hay, y, peor aún, R no nos advierte de nada de esto.
Es posible evitar este comportamiento usando <code>parse_factor</code> en el paquete <code>readr</code> (que usaremos mas adelante para importar datos). Ahora, al crear el factor, R nos muestra una advertencia de que algo no salió como se esperaba, haciendonos sospechar del resultado y que seamos cuidadosos.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="factores.html#cb100-1" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb100-2"><a href="factores.html#cb100-2" tabindex="-1"></a></span>
<span id="cb100-3"><a href="factores.html#cb100-3" tabindex="-1"></a>smoker_factor <span class="ot">&lt;-</span> <span class="fu">parse_factor</span>(smoker, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>)) <span class="co"># Genera una advertencia</span></span></code></pre></div>
<pre><code>## Warning: 1 parsing failure.
## row col           expected  actual
##   2  -- value in level set Funador</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="factores.html#cb102-1" tabindex="-1"></a>smoker_factor <span class="co"># Imprime el resultado anterior, pero tambien la advertencia, y donde ocurrió</span></span></code></pre></div>
<pre><code>##  [1] No Fumador &lt;NA&gt;       No Fumador No Fumador Fumador    Fumador   
##  [7] No Fumador Fumador    Fumador    No Fumador
## attr(,&quot;problems&quot;)
## # A tibble: 1 × 4
##     row   col expected           actual 
##   &lt;int&gt; &lt;int&gt; &lt;chr&gt;              &lt;chr&gt;  
## 1     2    NA value in level set Funador
## Levels: No Fumador Fumador</code></pre>
<p><strong>Buenas prácticas de programación.</strong> De forma general, al crear factores, siempre es mejor hacer explicitos los niveles y, aunque las advertencias son adecuadas para manjar con cuidado resultados inesperados como los del ejemplo anterior, siempre es preferible no crear factores que de entrada sabemos son erroneos.</p>
<p>Para evitar la creación de factores mal especificados, se utiliza la función <code>fct</code> en el <a href="https://forcats.tidyverse.org/index.html">paquete <code>forcats</code></a> (un paquete diseñado especificamente para trabajar con factores), el cual se diferencia de <code>factor</code> en que los niveles se crean en el orden en que aparecen en el vector de entrada, y no alfabéticamente.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="factores.html#cb104-1" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb104-2"><a href="factores.html#cb104-2" tabindex="-1"></a></span>
<span id="cb104-3"><a href="factores.html#cb104-3" tabindex="-1"></a>smoker <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>, <span class="st">&quot;No Fumador&quot;</span>)</span>
<span id="cb104-4"><a href="factores.html#cb104-4" tabindex="-1"></a>smoker_factor <span class="ot">&lt;-</span> <span class="fu">fct</span>(smoker, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;No Fumador&quot;</span>, <span class="st">&quot;Fumador&quot;</span>))</span></code></pre></div>
<p>Crear factores ordenados no es tan directo, pero el beneficio de crear factores correctos desde el inicio es más importante:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="factores.html#cb105-1" tabindex="-1"></a><span class="co"># Especificando los niveles</span></span>
<span id="cb105-2"><a href="factores.html#cb105-2" tabindex="-1"></a>rating_factor <span class="ot">&lt;-</span> <span class="fu">fct</span>(rating, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;Very Bad&quot;</span>, <span class="st">&quot;Bad&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;Good&quot;</span>, <span class="st">&quot;Very Good&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb105-3"><a href="factores.html#cb105-3" tabindex="-1"></a>    <span class="fu">lvls_reorder</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">ordered=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>El simbolo <code>%&gt;%</code> es un operador, el operador de <em>tuberia</em> (de la palabra inglesa <em>pipe</em>), el cual se carga en la sesión de R al cargar el paquete <code>forcats</code>. El uso de este operador se difiere hasta el siguiente capitulo.
En este momento es suficiente que entienda que cada vez que aparezca una expresión de la forma <code>objeto %&gt;% funcion(primer_arg, segundo_arg, ...)</code>, R lo interpreta como <code>funcion(objeto, primer_arg, segundo_arg, ...)</code>.</p>
<p>Otras funciones importantes para manejar factores, junto con un ejemplo de su uso, se presenta a continuación<a href="#fn20" class="footnote-ref" id="fnref20"><sup>20</sup></a>:</p>
<ul>
<li><code>fct_relevel</code>: nos permite jugar con el orden de los niveles de un factor. Por ejemplo:</li>
</ul>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="factores.html#cb106-1" tabindex="-1"></a><span class="fu">fct</span>(<span class="fu">c</span>(<span class="st">&quot;Fuego&quot;</span>, <span class="st">&quot;Tierra&quot;</span>, <span class="st">&quot;Agua&quot;</span>, <span class="st">&quot;Aire&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb106-2"><a href="factores.html#cb106-2" tabindex="-1"></a>    <span class="fu">fct_relevel</span>(<span class="st">&quot;Agua&quot;</span>, <span class="st">&quot;Tierra&quot;</span>, <span class="st">&quot;Fuego&quot;</span>)</span></code></pre></div>
<ul>
<li><code>fct_inorder</code>, <code>fct_infreq</code>: estas se encargan de ordenar los niveles de un factor en el orden en el que aparecen (<code>fct_inorder</code>) o en el orden especificado por la frecuencia con que aprece cada etiqieta (<code>fct_infreq</code>).</li>
</ul>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="factores.html#cb107-1" tabindex="-1"></a>vertebrates <span class="ot">&lt;-</span> <span class="fu">fct</span>(<span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;Mamifero&quot;</span>, <span class="st">&quot;Ave&quot;</span>, <span class="st">&quot;Reptil&quot;</span>, <span class="st">&quot;Pez&quot;</span>, <span class="st">&quot;Anfibio&quot;</span>), <span class="dv">250</span>, <span class="at">replace=</span><span class="cn">TRUE</span>))</span>
<span id="cb107-2"><a href="factores.html#cb107-2" tabindex="-1"></a>invertebrate <span class="ot">&lt;-</span> <span class="fu">fct</span>(<span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;Diptero&quot;</span>, <span class="st">&quot;Odonata&quot;</span>, <span class="st">&quot;Porifera&quot;</span>, <span class="st">&quot;Cnidario&quot;</span>, <span class="st">&quot;Aracnido&quot;</span>), <span class="dv">25</span>, <span class="at">replace=</span><span class="cn">TRUE</span>))</span>
<span id="cb107-3"><a href="factores.html#cb107-3" tabindex="-1"></a>animal_cat <span class="ot">&lt;-</span> <span class="fu">fct_c</span>(vertebrates, invertebrate) <span class="co"># fct_c permite combinar factores, preservando los niveles de los factores de entrada</span></span>
<span id="cb107-4"><a href="factores.html#cb107-4" tabindex="-1"></a></span>
<span id="cb107-5"><a href="factores.html#cb107-5" tabindex="-1"></a>animal_cat <span class="sc">%&gt;%</span> <span class="fu">fct_infreq</span>()</span></code></pre></div>
<ul>
<li><code>fct_lump</code> y <code>fct_lump_*</code>: estas funciones permiten agrupar niveles, preservando un numero especificado de veeces o solo aquellos niveles de baja frecuencia.</li>
</ul>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="factores.html#cb108-1" tabindex="-1"></a>animal_cat <span class="sc">%&gt;%</span> </span>
<span id="cb108-2"><a href="factores.html#cb108-2" tabindex="-1"></a>    <span class="fu">fct_lump_lowfreq</span>(<span class="at">other_level =</span> <span class="st">&quot;Invertebrados&quot;</span>)</span></code></pre></div>
<ul>
<li><code>fct_expand</code>: permite añadir niveles adicionales a un factor, ya sea que existan o no representastes de estos niveles en el factor.</li>
</ul>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="factores.html#cb109-1" tabindex="-1"></a>animal_cat <span class="sc">%&gt;%</span> </span>
<span id="cb109-2"><a href="factores.html#cb109-2" tabindex="-1"></a>    <span class="fu">fct_expand</span>(<span class="st">&quot;Himenoptero&quot;</span>, <span class="st">&quot;Platelmintos&quot;</span>, <span class="st">&quot;Equinodermos&quot;</span>, <span class="st">&quot;Anfioxo&quot;</span>, <span class="at">after=</span><span class="dv">5</span>)</span></code></pre></div>
<ul>
<li><code>fct_collapse</code>: permite agrupar los niveles en niveles nuevos manualmente definidos.</li>
</ul>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="factores.html#cb110-1" tabindex="-1"></a>animal_cat <span class="sc">%&gt;%</span> </span>
<span id="cb110-2"><a href="factores.html#cb110-2" tabindex="-1"></a>    <span class="fu">fct_collapse</span>(</span>
<span id="cb110-3"><a href="factores.html#cb110-3" tabindex="-1"></a>        <span class="at">Vertebrados=</span><span class="fu">c</span>(<span class="st">&quot;Mamifero&quot;</span>, <span class="st">&quot;Ave&quot;</span>, <span class="st">&quot;Reptil&quot;</span>, <span class="st">&quot;Pez&quot;</span>, <span class="st">&quot;Anfibio&quot;</span>),</span>
<span id="cb110-4"><a href="factores.html#cb110-4" tabindex="-1"></a>        <span class="at">Invertebrados=</span><span class="fu">c</span>(<span class="st">&quot;Diptero&quot;</span>, <span class="st">&quot;Odonata&quot;</span>, <span class="st">&quot;Porifera&quot;</span>, <span class="st">&quot;Cnidario&quot;</span>, <span class="st">&quot;Aracnido&quot;</span>))</span></code></pre></div>
<ul>
<li><code>fct_drop</code>: devuelve un factor cuyos niveles son solo aquellos representados dentro del factor.</li>
</ul>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="factores.html#cb111-1" tabindex="-1"></a>animal_cat <span class="sc">%&gt;%</span> </span>
<span id="cb111-2"><a href="factores.html#cb111-2" tabindex="-1"></a>    <span class="fu">fct_expand</span>(<span class="st">&quot;Angiospermas&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># Añade un nivel llamado Angiospermas</span></span>
<span id="cb111-3"><a href="factores.html#cb111-3" tabindex="-1"></a>    <span class="fu">fct_drop</span>() </span></code></pre></div>
<ul>
<li><code>fct_other</code>: Reemplaza los niveles especificados con un nivel especificado (por omisión, “other”).</li>
</ul>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="factores.html#cb112-1" tabindex="-1"></a>animal_cat <span class="sc">%&gt;%</span> </span>
<span id="cb112-2"><a href="factores.html#cb112-2" tabindex="-1"></a>    <span class="fu">fct_expand</span>(<span class="st">&quot;Himenoptero&quot;</span>, <span class="st">&quot;Platelmintos&quot;</span>, <span class="st">&quot;Equinodermos&quot;</span>, <span class="st">&quot;Anfioxo&quot;</span>, <span class="at">after=</span><span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb112-3"><a href="factores.html#cb112-3" tabindex="-1"></a>    <span class="fu">fct_other</span>(<span class="at">keep =</span> <span class="fu">c</span>(<span class="st">&quot;Mamifero&quot;</span>, <span class="st">&quot;Ave&quot;</span>, <span class="st">&quot;Reptil&quot;</span>, <span class="st">&quot;Pez&quot;</span>, <span class="st">&quot;Anfibio&quot;</span>, <span class="st">&quot;Anfioxo&quot;</span>), </span>
<span id="cb112-4"><a href="factores.html#cb112-4" tabindex="-1"></a>        <span class="at">other_level=</span><span class="st">&quot;Sin notocordio&quot;</span>) <span class="co"># Deja los cordados</span></span></code></pre></div>
<ul>
<li><code>fct_count</code>: cuenta el numero de elmentos del factor que pertenece a cada nivel. El resultadoe s una estructura de datos especial llamada <code>tibble</code> que veremos en la siguiente sección.</li>
</ul>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="factores.html#cb113-1" tabindex="-1"></a>animal_cat <span class="sc">%&gt;%</span> </span>
<span id="cb113-2"><a href="factores.html#cb113-2" tabindex="-1"></a>    <span class="fu">fct_count</span>(<span class="at">sort=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div class="footnotes">
<hr />
<ol start="20">
<li id="fn20"><p>Más información esta disponible en la documentación.<a href="factores.html#fnref20" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="marices-y-arreglos..html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tablas-de-datos-data-frames..html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
